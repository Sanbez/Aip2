<% layout('/layout/page.ejs') %>

<div class="container">
    <div class="page-header">
        <h1 class="page-title">–ú–æ–∏ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è</h1>
        <p class="page-subtitle">–ó–∞–ø–∏—à–∏—Ç–µ —Å–≤–æ–∏ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è –∑–∞ –õ—É–Ω–æ–π</p>
    </div>

    <div class="row">
        <div class="col-lg-5 mb-4">
            <div class="observation-form-card">
                <h2 class="form-title">–î–æ–±–∞–≤–∏—Ç—å –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ</h2>
                <p class="current-phase-info">–¢–µ–∫—É—â–∞—è —Ñ–∞–∑–∞: <strong><%= currentPhase %></strong></p>

                <form action="/observations/submit" method="POST" class="observation-form">
                    <div class="mb-3">
                        <label for="userName" class="form-label">–í–∞—à–µ –∏–º—è</label>
                        <input type="text" class="form-control custom-input" id="userName" name="userName" required>
                    </div>

                    <div class="mb-3">
                        <label for="moonPhase" class="form-label">–§–∞–∑–∞ –õ—É–Ω—ã</label>
                        <select class="form-select custom-input" id="moonPhase" name="moonPhase" required>
                            <option value="<%= currentPhase %>" selected><%= currentPhase %></option>
                            <option value="–ù–æ–≤–æ–ª—É–Ω–∏–µ">–ù–æ–≤–æ–ª—É–Ω–∏–µ</option>
                            <option value="–ú–æ–ª–æ–¥–∞—è –ª—É–Ω–∞">–ú–æ–ª–æ–¥–∞—è –ª—É–Ω–∞</option>
                            <option value="–ü–µ—Ä–≤–∞—è —á–µ—Ç–≤–µ—Ä—Ç—å">–ü–µ—Ä–≤–∞—è —á–µ—Ç–≤–µ—Ä—Ç—å</option>
                            <option value="–ü—Ä–∏–±—ã–≤–∞—é—â–∞—è –ª—É–Ω–∞">–ü—Ä–∏–±—ã–≤–∞—é—â–∞—è –ª—É–Ω–∞</option>
                            <option value="–ü–æ–ª–Ω–æ–ª—É–Ω–∏–µ">–ü–æ–ª–Ω–æ–ª—É–Ω–∏–µ</option>
                            <option value="–£–±—ã–≤–∞—é—â–∞—è –ª—É–Ω–∞">–£–±—ã–≤–∞—é—â–∞—è –ª—É–Ω–∞</option>
                            <option value="–ü–æ—Å–ª–µ–¥–Ω—è—è —á–µ—Ç–≤–µ—Ä—Ç—å">–ü–æ—Å–ª–µ–¥–Ω—è—è —á–µ—Ç–≤–µ—Ä—Ç—å</option>
                            <option value="–°—Ç–∞—Ä–∞—è –ª—É–Ω–∞">–°—Ç–∞—Ä–∞—è –ª—É–Ω–∞</option>
                        </select>
                    </div>

                    <div class="mb-3">
                        <label for="observation" class="form-label">–í–∞—à–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ</label>
                        <textarea class="form-control custom-input" id="observation" name="observation" rows="5"
                                  placeholder="–û–ø–∏—à–∏—Ç–µ —á—Ç–æ –≤—ã –Ω–∞–±–ª—é–¥–∞–ª–∏: –ø–æ–≥–æ–¥–Ω—ã–µ —É—Å–ª–æ–≤–∏—è, —è—Ä–∫–æ—Å—Ç—å –ª—É–Ω—ã, –≤–∏–¥–∏–º—ã–µ –¥–µ—Ç–∞–ª–∏ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏..." required></textarea>
                    </div>

                    <button type="submit" class="btn btn-primary-custom w-100">
                        <span>üìù</span> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ
                    </button>
                </form>
            </div>
        </div>

        <div class="col-lg-7">
            <div class="observations-list-card">
                <h2 class="form-title">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è</h2>

                <% if (observations.length === 0) { %>
                    <div class="no-observations">
                        <p>–ü–æ–∫–∞ –Ω–µ—Ç –∑–∞–ø–∏—Å–∞–Ω–Ω—ã—Ö –Ω–∞–±–ª—é–¥–µ–Ω–∏–π. –°—Ç–∞–Ω—å—Ç–µ –ø–µ—Ä–≤—ã–º!</p>
                    </div>
                <% } else { %>
                    <div class="observations-list">
                        <% observations.forEach(function(obs) { %>
                        <div class="observation-item">
                            <div class="observation-header">
                                <span class="observer-name">üë§ <%= obs.userName %></span>
                                <span class="observation-date"><%= new Date(obs.date).toLocaleDateString('ru-RU', { year: 'numeric', month: 'long', day: 'numeric' }) %></span>
                            </div>
                            <div class="observation-phase">
                                üåô –§–∞–∑–∞: <strong><%= obs.moonPhase %></strong>
                            </div>
                            <div class="observation-text">
                                <%= obs.observation %>
                            </div>
                        </div>
                        <% }); %>
                    </div>
                <% } %>
            </div>
        </div>
    </div>

    <div class="observation-tips">
        <h2 class="section-title">–°–æ–≤–µ—Ç—ã –ø–æ –Ω–∞–±–ª—é–¥–µ–Ω–∏—é</h2>
        <div class="row">
            <div class="col-md-4">
                <div class="tip-card">
                    <div class="tip-icon">üî≠</div>
                    <h4>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–∏–Ω–æ–∫–ª—å</h4>
                    <p>–î–∞–∂–µ –ø—Ä–æ—Å—Ç–æ–π –±–∏–Ω–æ–∫–ª—å –ø–æ–∑–≤–æ–ª–∏—Ç —É–≤–∏–¥–µ—Ç—å –∫—Ä–∞—Ç–µ—Ä—ã –∏ –º–æ—Ä—è –Ω–∞ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ –õ—É–Ω—ã.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="tip-card">
                    <div class="tip-icon">üåÉ</div>
                    <h4>–í—ã–±–∏—Ä–∞–π—Ç–µ —Ç–µ–º–Ω–æ–µ –º–µ—Å—Ç–æ</h4>
                    <p>–í–¥–∞–ª–∏ –æ—Ç –≥–æ—Ä–æ–¥—Å–∫–∏—Ö –æ–≥–Ω–µ–π –¥–µ—Ç–∞–ª–∏ –õ—É–Ω—ã –±—É–¥—É—Ç –≤–∏–¥–Ω—ã –≥–æ—Ä–∞–∑–¥–æ –ª—É—á—à–µ.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="tip-card">
                    <div class="tip-icon">üìÖ</div>
                    <h4>–ù–∞–±–ª—é–¥–∞–π—Ç–µ —Ä–µ–≥—É–ª—è—Ä–Ω–æ</h4>
                    <p>–í–µ–¥–∏—Ç–µ –¥–Ω–µ–≤–Ω–∏–∫ –Ω–∞–±–ª—é–¥–µ–Ω–∏–π, —á—Ç–æ–±—ã –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ–∞–∑ –õ—É–Ω—ã.</p>
                </div>
            </div>
        </div>
    </div>
</div>
